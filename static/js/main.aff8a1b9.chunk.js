(this.webpackJsonpmdqstore=this.webpackJsonpmdqstore||[]).push([[0],{90:function(e,t,c){"use strict";c.r(t);var n=c(3),a=c(1),r=c.n(a),i=c(30),s=c.n(i),o=c(35),l=c(15),d=c(66),j=c(65),u=c(67),b=c(17),m=r.a.createContext(),O=function(){return Object(a.useContext)(m)};function h(e){var t=e.children,c=Object(a.useState)([{totalCash:0,totalItems:0}]),r=Object(l.a)(c,2),i=r[0],s=r[1],o=Object(a.useState)(0),d=Object(l.a)(o,2),j=d[0],u=d[1];function b(){var e=i;e.pop();var t=e.reduce((function(e,t){return e+t.price*((100-t.discount)/100)*t.cant}),0),c=e.reduce((function(e,t){return e+t.cant}),0);e.push({totalCash:t,totalItems:c}),s(e),u(c)}return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(m.Provider,{value:{updateCart:function(e,t,c,n,a,r,o,l,d){var j={categoryId:e,description:t,discount:c,id:n,image:a,price:r,stock:o,title:l,cant:d},u=i.find((function(e){return e.id===j.id})),m=i;if(u){var O=m.indexOf(u);j.cant=u.cant+j.cant,m.splice(O,1),m.unshift(j),s(m),b()}else m.unshift(j),s(m),b()},inmaxmin:[1,0,5],cartContent:i,hookTotal:j,killCartItem:function(e){var t=i.find((function(t){return t.id===e})),c=i;if(t){var n=c.indexOf(t);c.splice(n,1),s(c),b()}else console.log("Error Item Id not Founded")}},children:t})})}var x=c(22),f=c(50),p=(c(70),f.a.initializeApp({apiKey:"AIzaSyC4gb2hMwhnHsoPxYL5mWdZm8OwaNtbAXQ",authDomain:"mdq-store.firebaseapp.com",databaseURL:"https://mdq-store.firebaseio.com",projectId:"mdq-store",storageBucket:"mdq-store.appspot.com",messagingSenderId:"303914116723",appId:"1:303914116723:web:15f48e7f01c49090022c06",measurementId:"G-CFNBSPJC97"})),g=function(){return f.a.firestore(p)};var v=function(){var e=O().hookTotal,t=Object(a.useState)(null),c=Object(l.a)(t,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){g().collection("Category").get().then((function(e){0===e.size&&console.log("Sin resultados");var t=e.docs.map((function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{idFirebase:e.id})}));i(t),localStorage.setItem("categorys",JSON.stringify(t))})).catch((function(e){return console.log(e)})).finally((function(){}))}),[]),Object(n.jsxs)(d.a,{bg:"light",variant:"light",children:[Object(n.jsx)(x.b,{to:"/",children:Object(n.jsx)(d.a.Brand,{children:"MdqStore"})}),Object(n.jsxs)(u.a,{className:"mr-auto",children:[Object(n.jsx)(u.a.Link,{children:Object(n.jsx)(x.b,{to:"/",children:"Home"})}),Object(n.jsx)(j.a,{title:"Categorys",id:"collasible-nav-dropdown",children:r?r.map((function(e,t){return Object(n.jsx)(j.a.Item,{children:Object(n.jsx)(x.b,{to:"/categorys/"+e.name,children:e.name})},"Cat"+e.id+t)})):Object(n.jsx)(n.Fragment,{})})]}),Object(n.jsx)(x.b,{to:"/cart",children:Object(n.jsxs)(b.a,{variant:"outline-primary",children:["Cart ",e," "]})})]})},C=c(20),y=c(74),I=c(73);var N=function(e){var t=e.inmaxmin,c=e.thisCart,a=e.updateThisCart;return Object(n.jsx)(r.a.Fragment,{children:Object(n.jsx)("div",{className:"btn-toolbar d-flex justify-content-center",role:"toolbar","aria-label":"Toolbar with button groups",children:Object(n.jsxs)(I.a,{children:[Object(n.jsx)(b.a,{disabled:c===t[0],onClick:function(){return a(-1)},children:"-"}),Object(n.jsx)(b.a,{disabled:!0,children:c}),Object(n.jsx)(b.a,{disabled:c===t[2],onClick:function(){return a(1)},children:"+"})]})})})};var k=function(e){var t=e.cat,c=e.categoryId,r=e.description,i=e.discount,s=e.id,o=e.image,d=e.price,j=e.stock,u=e.title,m=O(),h=m.inmaxmin,f=m.updateCart,p=Object(a.useState)(h[0]),g=Object(l.a)(p,2),v=g[0],I=g[1];return Object(n.jsxs)("div",{className:"Item card col-md-2 col-sm-6 col-xs-12 mt-1",children:[Object(n.jsx)(x.b,{to:"/item/"+s,children:t?Object(n.jsx)(C.a.Img,{variant:"top",src:"../"+o}):Object(n.jsx)(C.a.Img,{variant:"top",src:o})}),Object(n.jsxs)(C.a.Body,{children:[Object(n.jsx)(C.a.Title,{children:u}),Object(n.jsx)(C.a.Text,{children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("del",{className:"col-9",children:["price: $",d," "]}),Object(n.jsxs)(y.a,{variant:"warning",children:["-",i,"%"]}),Object(n.jsxs)("h4",{className:"col-12 text-center",children:[" $",Math.round(d*((100-i)/100)*100)/100]})]})}),Object(n.jsx)(N,{inmaxmin:h,thisCart:v,updateThisCart:function(e){I(v+e)},updateCart:f}),Object(n.jsx)("div",{className:"mt-1",children:Object(n.jsx)(b.a,{variant:"success",block:!0,onClick:function(){return f(c,r,i,s,o,d,j,u,v)},children:"Add To Cart"})})]})]})},w=c(39);var S=function(){return Object(n.jsxs)("div",{className:"col-12 d-flex-column mt-5",children:[Object(n.jsxs)("div",{className:"row justify-content-center",children:[Object(n.jsx)(w.a,{animation:"grow"}),Object(n.jsx)(w.a,{animation:"border"}),Object(n.jsx)(w.a,{animation:"grow"})]}),Object(n.jsx)("div",{className:"row justify-content-center mt-3",children:Object(n.jsx)("p",{children:"Loading..."})}),Object(n.jsxs)("div",{className:"row justify-content-center",children:[Object(n.jsx)(w.a,{animation:"grow"}),Object(n.jsx)(w.a,{animation:"border"}),Object(n.jsx)(w.a,{animation:"grow"})]})]})},T=c(14);var E=function(e){var t=Object(a.useState)([]),c=Object(l.a)(t,2),i=c[0],s=c[1],d=Object(a.useState)(!0),j=Object(l.a)(d,2),u=j[0],b=j[1],m=Object(T.f)().categoryId,O=JSON.parse(localStorage.getItem("categorys"));return Object(a.useEffect)((function(){var e=O.find((function(e){return e.name===m}));(m?g().collection("Productos").where("categoryId","==",parseInt(e.id)):g().collection("Productos").limit(100)).get().then((function(e){0===e.size&&console.log("Sin resultados");var t=e.docs.map((function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}));s(t),setTimeout((function(){b(!1)}),3e3)})).catch((function(e){return console.log(e)})).finally((function(){}))}),[]),u?Object(n.jsx)(S,{}):Object(n.jsx)(r.a.Fragment,{children:Object(n.jsx)("div",{className:"ItemList",children:Object(n.jsx)("div",{className:"container col-12",children:Object(n.jsx)("div",{className:"row",children:i.map((function(e,t){return Object(n.jsx)(k,{cat:m,categoryId:e.categoryId,description:e.description,discount:e.discount,id:e.id,image:e.image,price:e.price,stock:e.stock,title:e.title},e.id+t)}))})})})})};var B=function(){return Object(n.jsx)("div",{className:"Home",children:Object(n.jsx)(E,{})})};c(89);var F=function(e){var t=e.itemId;console.log("itemId",t);var c=O(),i=c.inmaxmin,s=c.updateCart,o=Object(a.useState)(i[0]),d=Object(l.a)(o,2),j=d[0],u=d[1];return Object(n.jsx)(r.a.Fragment,{children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"Item card col-3",children:Object(n.jsx)(C.a.Img,{variant:"top",src:"."+t.image})}),Object(n.jsx)("div",{className:"Item card col-9",children:Object(n.jsxs)(C.a.Body,{children:[Object(n.jsx)(C.a.Title,{children:t.title}),Object(n.jsxs)(C.a.Text,{children:[Object(n.jsxs)("p",{children:["description: ",t.description," "]}),Object(n.jsxs)("p",{children:["price: ",t.price," "]}),Object(n.jsxs)("p",{children:["discount: ",t.discount," "]})]}),Object(n.jsx)(N,{inmaxmin:i,thisCart:j,updateThisCart:function(e){u(j+e)},updateCart:s}),Object(n.jsx)("div",{className:"mt-1",children:Object(n.jsx)(b.a,{variant:"success",block:!0,onClick:function(){return s(t.categoryId,t.description,t.discount,t.id,t.image,t.price,t.stock,t.title,j)},children:"Add To Cart"})})]})})]})})};var P=function(){var e=Object(T.f)().itemId,t=Object(a.useState)(null),c=Object(l.a)(t,2),i=c[0],s=c[1],d=Object(a.useState)(!0),j=Object(l.a)(d,2),u=j[0],b=j[1];return Object(a.useEffect)((function(){g().collection("Productos").doc(e).get().then((function(e){if(void 0!==e.data()){var t=Object(o.a)({id:e.id},e.data());s(t)}else console.log("Sin resultados - Result:")})).catch((function(e){return console.log(e)})).finally((function(){b(!1)}))}),[]),Object(n.jsx)(r.a.Fragment,{children:i?Object(n.jsx)(F,{itemId:i}):u?Object(n.jsx)(S,{}):Object(n.jsxs)("h3",{children:["No se encontraron resultados con el id ",Object(n.jsx)("br",{})," ",e," ",Object(n.jsx)("br",{})," en la base de datos"]})})};var q=function(e){var t=e.item,c=O(),i=c.inmaxmin,s=c.killCartItem,o=c.updateCart,d=Object(a.useState)(t.cant),j=Object(l.a)(d,2),u=j[0],m=j[1];return t.totalCash?Object(n.jsx)(n.Fragment,{}):Object(n.jsx)(r.a.Fragment,{children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"Item card col-2",children:Object(n.jsx)(C.a.Img,{variant:"top",src:"."+t.image})}),Object(n.jsx)("div",{className:"Item card col-10",children:Object(n.jsxs)(C.a.Body,{children:[Object(n.jsx)("button",{className:"btn btn-danger float-right",onClick:function(){return s(t.id)},children:"x"}),Object(n.jsx)(C.a.Title,{children:t.title}),Object(n.jsxs)(C.a.Text,{children:[Object(n.jsxs)("p",{children:["Description: ",t.description," "]}),Object(n.jsxs)("div",{className:"row border",children:[Object(n.jsxs)("p",{className:"col-4",children:["Price: $",t.price," "]}),Object(n.jsxs)("p",{className:"col-4",children:["-",t.discount,"%"]}),Object(n.jsx)("p",{className:"col-2",children:"="}),Object(n.jsx)("p",{className:"col-2",children:t.price*((100-t.discount)/100)})]}),Object(n.jsxs)("div",{className:"row mt-2 justify-content-around",children:[Object(n.jsxs)("p",{children:["Quantity: ",t.cant]}),Object(n.jsx)(N,{inmaxmin:i,thisCart:u,updateThisCart:function(e){m(u+e)},updateCart:o}),Object(n.jsxs)("p",{children:["Total $ ",t.price*((100-t.discount)/100)*t.cant]})]})]}),Object(n.jsx)("div",{className:"mt-1",children:Object(n.jsx)(b.a,{variant:"success",block:!0,onClick:function(){return o(t.categoryId,t.description,t.discount,t.id,t.image,t.price,t.stock,t.title,u-t.cant)},children:"Modfy Cart"})})]})})]})})};function L(){return Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row col-12 justify-content-center",children:[Object(n.jsx)("img",{src:"./images/cart.png",alt:"Cart Icon"}),Object(n.jsx)("div",{className:"row col-12 justify-content-center",children:Object(n.jsxs)("h1",{children:["Cart is Empty. Click ",Object(n.jsx)(x.b,{to:"/",children:"Here "})," to return shopping"]})})]})})}var H=c(18),z=c(45);var A=function(){var e=O().cartContent,t=Object(a.useState)(!1),c=Object(l.a)(t,2),i=c[0],s=c[1],o=function(){return s(!1)},d=Object(a.useState)(!1),j=Object(l.a)(d,2),u=j[0],m=j[1],h=Object(a.useState)(!0),x=Object(l.a)(h,2),p=x[0],v=x[1];function C(e){var t=document.getElementById("formEmail").value,c=document.getElementById("formEmail2").value,n=document.getElementById("formName").value,a=document.getElementById("formCellphone").value;t===c&&""!==n&&""!==a&&v(!1)}function y(){var t={email:document.getElementById("formEmail2").value},c={name:document.getElementById("formName").value,phone:document.getElementById("formCellphone").value,email:document.getElementById("formEmail").value};if(t.email!==c.email||""===c.name||""===c.phone)return console.log("userInfo",c,"email2",t),alert("Por favor verifique los datos ingresados");!function(t){for(var c=e[e.length-1],n=[],a=0;a<e.length-1;a++){var r=e[a];n.push({cant:r.cant,id:r.id,price:r.price,discount:r.discount,title:r.title})}var i={buyer:t,items:n,date:f.a.firestore.Timestamp.fromDate(new Date),total:c,state:"generated"};g().collection("Orders").add(i).then((function(t){var c=t.id;m(c),function(){for(var t=function(t){var c=e[t],n=g().collection("Productos").doc(c.id);g().runTransaction((function(e){return e.get(n).then((function(t){var a=t.data().stock-c.cant;return e.update(n,{stock:a}),Promise.resolve("New Stock is"+a)}))})).then((function(e){console.log(c.title),console.log("Transaction success",e)})).catch((function(e){console.log("Transaction failure:",e)}))},c=0;c<e.length-1;c++)t(c)}()})).catch((function(e){console.log(e)})).finally((function(){v(!0)}))}(c)}return Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsx)("div",{className:"container mt-5",children:Object(n.jsx)(b.a,{id:"checkButton",size:"lg",variant:"warning",onClick:function(){return s(!0)},block:!0,children:"CheckOut"})}),Object(n.jsxs)(z.a,{show:i,onHide:o,backdrop:"static",keyboard:!1,children:[Object(n.jsx)(z.a.Header,{closeButton:!0,children:Object(n.jsx)(z.a.Title,{children:"CheckOut"})}),Object(n.jsx)(z.a.Body,{children:Object(n.jsxs)(H.a,{children:[Object(n.jsxs)(H.a.Row,{children:[Object(n.jsxs)(H.a.Group,{controlId:"formName",children:[Object(n.jsx)(H.a.Label,{children:"Name: "}),Object(n.jsx)(H.a.Control,{type:"text",placeholder:"Enter your Name",required:!0})]}),Object(n.jsxs)(H.a.Group,{controlId:"formCellphone",children:[Object(n.jsx)(H.a.Label,{children:"Cell Phone"}),Object(n.jsx)(H.a.Control,{type:"text",placeholder:"Enter your Cell Phone Number",required:!0})]})]}),Object(n.jsxs)(H.a.Group,{controlId:"formEmail",children:[Object(n.jsx)(H.a.Label,{children:"Email address"}),Object(n.jsx)(H.a.Control,{onInput:function(){return C()},type:"email",placeholder:"Enter your email",required:!0})]}),Object(n.jsxs)(H.a.Group,{controlId:"formEmail2",children:[Object(n.jsx)(H.a.Label,{children:"Email address"}),Object(n.jsx)(H.a.Control,{onInput:function(){return C()},type:"email",placeholder:"Please confirm your email",required:!0}),Object(n.jsx)(H.a.Text,{className:"text-muted",children:"We'll never share your email or personal information with anyone else."})]}),Object(n.jsx)(b.a,{disabled:p,variant:"primary",onClick:function(){return y()},children:"Confirm Order"}),u?Object(n.jsxs)(H.a.Text,{className:"text-muted",children:["Your Order Id is: ",u]}):Object(n.jsx)(n.Fragment,{})]})}),Object(n.jsx)(z.a.Footer,{children:Object(n.jsx)(b.a,{variant:"secondary",onClick:o,children:"Close"})})]})]})};var D=function(){var e=O(),t=e.cartContent,c=e.updateCart,a=t[t.length-1],i=t;return 1===i.length?Object(n.jsx)(L,{}):Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsxs)("div",{className:"row border m-3 justify-content-around",children:[Object(n.jsxs)("h3",{children:["Total Cart: $",a.totalCash]}),Object(n.jsxs)("h4",{children:[a.totalItems," items"]})]}),i.map((function(e,t){return Object(n.jsx)(q,{updateCart:c,item:e},t)})),Object(n.jsx)(A,{})]})};var G=function(){return Object(n.jsx)(x.a,{children:Object(n.jsxs)(h,{children:[Object(n.jsx)(v,{}),Object(n.jsxs)(T.c,{children:[Object(n.jsx)(T.a,{exact:!0,path:"/",children:Object(n.jsx)(B,{})}),Object(n.jsx)(T.a,{path:"/item/:itemId",children:Object(n.jsx)(P,{})}),Object(n.jsx)(T.a,{path:"/cart",children:Object(n.jsx)(D,{})}),Object(n.jsx)(T.a,{path:"/categorys/:categoryId",children:Object(n.jsx)(B,{})})]})]})})},J=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,95)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),r(e),i(e)}))};s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(G,{})}),document.getElementById("root")),J()}},[[90,1,2]]]);
//# sourceMappingURL=main.aff8a1b9.chunk.js.map